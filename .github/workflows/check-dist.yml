# This workflow ensures that generated files are up-to-date with their sources.
# It checks three types of generated files:
# 1. dist/index.js - The transpiled JavaScript action code
# 2. consumer-workflows/ - Template workflows generated from examples/
# 3. .github/workflows/ - Reusable workflows generated from examples/
#
# These files are generated by running `npm run build`.
# If this workflow is run from a feature branch, it will act as an additional CI
# check and fail if the checked-in generated files do not match what is
# expected from the build.
name: Check Transpiled JavaScript and Workflows

on:
  pull_request:
    branches:
      - main
    paths-ignore:
      - '**.md'
  push:
    branches:
      - main
    paths-ignore:
      - '**.md'

permissions:
  contents: read

jobs:
  check--action-dist:
    uses: actions/reusable-workflows/.github/workflows/check-dist.yml@main
    with:
      node-version: '24.x'
  check--consumer-workflows-dist:
    uses: actions/reusable-workflows/.github/workflows/check-dist.yml@main
    with:
      node-version: '24.x'
      dist-path: './consumer-workflows'
  check--reusable-workflows-dist:
    uses: actions/reusable-workflows/.github/workflows/check-dist.yml@main
    with:
      node-version: '24.x'
      dist-path: './.github/workflows'
